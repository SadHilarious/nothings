
# Chapter 12: Instruction Sets: Addressing Modes and Formats / Tập lệnh: Chế độ định địa chỉ và Định dạng

## 12.1 Addressing Modes / Chế độ định địa chỉ

*   **Immediate**: Operand is included directly within the instruction itself, not fetched from memory. This is efficient for constants or small values.

    **Trực tiếp**: Toán hạng nằm ngay trong lệnh, không cần truy xuất từ bộ nhớ. Hiệu quả khi dùng với hằng số hoặc giá trị nhỏ.
*   **Direct**: The instruction specifies the memory address of the operand directly. The CPU fetches the operand from that memory location.

    **Trực tiếp (địa chỉ)**: Trường địa chỉ trong lệnh chỉ rõ nơi lưu toán hạng trong bộ nhớ. CPU lấy toán hạng từ địa chỉ đó.
*   **Indirect**: The instruction provides a memory address, but that address contains another address pointing to the actual operand. This allows for dynamic memory referencing.

    **Gián tiếp**: Trường địa chỉ chứa địa chỉ phụ, và địa chỉ phụ này mới trỏ đến toán hạng thật sự. Thường dùng khi cần truy xuất động.
*   **Register**: The operand is stored in a CPU register. This allows very fast access because registers are internal to the processor.

    **Thanh ghi**: Toán hạng được lưu trong một thanh ghi của CPU, giúp truy xuất cực nhanh.
*   **Register Indirect**: A register contains the memory address of the operand. CPU uses the address from the register to fetch the data.

    **Gián tiếp qua thanh ghi**: Thanh ghi không chứa toán hạng mà chứa địa chỉ của toán hạng trong bộ nhớ.
*   **Displacement (Base + Offset)**: Combines a base address from a register with an offset (constant or register) to compute the effective address. Used in arrays or structures.

    **Dịch chuyển**: Tính địa chỉ hiệu lực bằng cách cộng một địa chỉ cơ sở (trong thanh ghi) với một độ lệch. Dùng nhiều trong mảng và cấu trúc.
*   **Relative**: The effective address is calculated by adding an offset to the program counter (PC). This is often used for branching.

    **Tương đối**: Địa chỉ hiệu lực = PC + độ lệch. Thường dùng trong các lệnh nhảy hoặc điều kiện.
*   **Indexed**: An index register holds a value that is added to a base address to get the effective address. Useful for traversing arrays.

    **Chỉ mục**: Thanh ghi chỉ mục cộng với địa chỉ cơ sở tạo thành địa chỉ hiệu lực. Dùng nhiều trong truy xuất mảng theo chỉ số.

## 12.2 Addressing Examples / Ví dụ định địa chỉ

*   Load R1, 2000: Direct
*   Load R1, (2000): Indirect
*   Load R1, (R2): Register Indirect
*   Load R1, #5: Immediate

## 12.3 Instruction Formats / Định dạng lệnh

*   **Fixed Format**: All instructions same length.

    **Định dạng cố định**: Mọi lệnh đều có độ dài bằng nhau.
*   **Variable Format**: Different instructions have different lengths.

    **Định dạng biến đổi**: Độ dài lệnh khác nhau.
*   **Typical Fields**:
    *   **Opcode**: Operation code.

        **Mã thao tác**.
    *   **Source, Destination**: Operands.

        **Nguồn, Đích**: Toán hạng.
    *   **Mode Bits**: Specify addressing mode.

        **Bit chế độ**: Xác định kiểu địa chỉ.

## 12.4 Number of Addresses / Số lượng địa chỉ

*   **3-address**: result = A op B → C, where op is an operator (e.g., +, -, *, /).

    **3 địa chỉ**: C = A toán tử B, trong đó toán tử có thể là cộng, trừ, nhân, chia.
*   **2-address**: A = A op B. The result overwrites operand A.

    **2 địa chỉ**: A = A toán tử B. Kết quả ghi đè lên toán hạng A.
*   **1-address**: Uses an accumulator: A = Acc op M[X].

    **1 địa chỉ**: Dùng bộ tích lũy: A = Acc toán tử M[X].
*   **0-address**: Stack-based: operands pushed to stack, operator pops them and pushes result.

    **0 địa chỉ**: Dựa trên ngăn xếp: toán hạng đẩy vào stack, toán tử lấy ra và đẩy kết quả trở lại.