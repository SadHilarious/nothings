# Chapter 4: Memory Hierarchy / Phân Cấp Bộ Nhớ

## 4.1 Principle of Locality / Nguyên lý địa phương

*   **Locality of Reference**: Tendency to access same or nearby memory locations repeatedly.

    **Tính địa phương**: Khuynh hướng truy cập lặp lại cùng vị trí hoặc gần nhau trong bộ nhớ.
*   **Temporal Locality**: Recently accessed items are likely to be accessed again soon.

    **Địa phương theo thời gian**: Dữ liệu vừa truy cập có khả năng sẽ được truy cập lại.
*   **Spatial Locality**: Nearby memory locations tend to be accessed sequentially.

    **Địa phương theo không gian**: Các địa chỉ gần nhau thường được truy cập liên tiếp.

## 4.2 Memory Characteristics / Đặc điểm bộ nhớ

*   **Location**: Internal (e.g., cache, RAM) vs external (e.g., disk).

    **Vị trí**: Bộ nhớ trong (như RAM, cache) vs bộ nhớ ngoài (như đĩa).
*   **Capacity**: Measured in bytes, affects system capability.

    **Dung lượng**: Tính bằng byte, ảnh hưởng khả năng hệ thống.
*   **Unit of Transfer**: Number of bits moved per access.

    **Đơn vị truyền**: Số bit truyền mỗi lần truy cập.
*   **Access Method**: Sequential (tape), direct (disk), random (RAM).

    **Phương thức truy cập**: Tuần tự, trực tiếp, ngẫu nhiên.
*   **Performance**: Access time, memory cycle time, transfer rate.

    **Hiệu năng**: Thời gian truy cập, chu kỳ nhớ, tốc độ truyền.
*   **Physical Type**: Semiconductor, magnetic, optical.

    **Loại vật lý**: Bán dẫn, từ tính, quang học.
*   **Volatility**: Whether data is lost without power.

    **Tính khả biến**: Dữ liệu có mất khi tắt nguồn hay không.

## 4.3 Types of Memory / Các loại bộ nhớ

*   **RAM (Random Access Memory)**: Fast, volatile working memory.

    **RAM**: Bộ nhớ làm việc nhanh, mất dữ liệu khi tắt nguồn.
*   **ROM (Read-Only Memory)**: Non-volatile, stores firmware.

    **ROM**: Không mất dữ liệu, chứa chương trình cố định.
*   **Cache**: High-speed memory near CPU.

    **Cache**: Bộ nhớ tốc độ cao gần CPU.
*   **Disk (HDD/SSD)**: Large, slow storage for long-term data.

    **Ổ đĩa (HDD/SSD)**: Lưu trữ lâu dài, tốc độ chậm.

## 4.4 Memory Hierarchy / Phân cấp bộ nhớ

*   **Goal**: Balance speed, cost, and capacity.

    **Mục tiêu**: Cân bằng giữa tốc độ, chi phí và dung lượng.
*   **Levels (fastest to slowest)**:
    *   Registers → Cache → Main Memory → Disk → Tape

        **Cấp độ (từ nhanh đến chậm)**: Thanh ghi → Cache → RAM → Ổ đĩa → Băng từ.
*   **Tradeoffs**:
    *   Faster = smaller + more expensive per bit.

        **Nhanh hơn = nhỏ hơn và đắt hơn.**
    *   Larger = slower + cheaper per bit.

        **Lớn hơn = chậm hơn và rẻ hơn.**

## 4.5 Two-Level Memory / Bộ nhớ hai cấp

*   **Concept**: Small fast memory (M1) + large slow memory (M2).

    **Khái niệm**: Bộ nhớ nhỏ nhanh (M1) + bộ nhớ lớn chậm (M2).
*   **Operation**: If data not in M1 → fetch block from M2 to M1.

    **Hoạt động**: Nếu không có dữ liệu ở M1 → lấy từ M2.
*   **Based on locality**: Once block is used, nearby data likely used soon.

    **Dựa trên địa phương**: Khi 1 khối được dùng, dữ liệu gần đó có thể sẽ dùng tiếp.

## 4.6 Chapter Summary / Tổng kết chương

*   Hiểu rõ nguyên lý địa phương để tối ưu thiết kế bộ nhớ.
*   Phân biệt RAM, ROM, cache và lưu trữ ngoài.
*   Phân cấp bộ nhớ giúp cân bằng tốc độ và chi phí.
*   Mô hình hai cấp tận dụng tính địa phương để tăng hiệu năng.